!function(){"use strict";function t(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],u=!0,a=!1;try{for(n=n.call(t);!(u=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);u=!0);}catch(t){a=!0,o=t}finally{try{u||null==n.return||n.return()}finally{if(a)throw o}}return i}}(t,n)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var r=function(){function e(t,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.state=o,this.elem=t,this.events={},this.template=n,this.templateManager=r()}var r,o;return r=e,(o=[{key:"subscribeToEvents",value:function(){var e=this;Object.entries(this.events).forEach((function(n){var r=t(n,2),o=r[0],i=r[1],u=o.split("@"),a=u[0],c=u[1].split(".")[0],l=u[1].split(".")[1],s="".concat(c).concat(l?".".concat(l):""),f=u[1].split(".")[2];f&&"all"===f.toLowerCase()?e.elem.querySelectorAll(s).forEach((function(t){return t.addEventListener(a,i)})):e.elem.querySelector(s).addEventListener(a,i)}))}},{key:"setState",value:function(e){var n=this;Object.entries(e).forEach((function(e){var r=t(e,2),o=r[0],i=r[1];n.state[o]=i})),this.elem.innerHTML=this.render(),this.subscribeToEvents()}},{key:"onMount",value:function(e){console.group(e.id),Object.entries(this.state).forEach((function(e){var n=t(e,2),r=n[0],o=n[1];console.log("".concat(r,": ").concat(o))})),console.groupEnd()}},{key:"render",value:function(){return this.templateManager.renderTemplate(this.template,this.state)}}])&&n(r.prototype,o),e}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},u(t,e)}function a(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(p,t);var e,n,r,o,f=(r=p,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(r);if(o){var n=l(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return a(this,t)});function p(t,e,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),s(c(o=f.call(this,t,e,n,r)),"state",{value:1,input:"123"}),s(c(o),"events",{"click@button.dec":o.decreaseCounter.bind(c(o)),"click@button.inc":o.increaseCounter.bind(c(o)),"change@input":o.setInputValue.bind(c(o))}),o.setState(r),o.onMount(o.elem),o}return e=p,(n=[{key:"increaseCounter",value:function(){this.setState({value:this.state.value+1})}},{key:"decreaseCounter",value:function(){this.setState({value:this.state.value-1})}},{key:"setInputValue",value:function(t){this.setState({input:t.target.value})}}])&&i(e.prototype,n),p}(r);function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e){return d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},d(t,e)}function m(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return g(t)}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var j=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=w(r);if(o){var n=w(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return m(this,t)});function u(t,e,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),O(g(o=i.call(this,t,e,n,r)),"state",{tasks:["shopping"],input:""}),O(g(o),"events",{"click@button.add":o.addTask.bind(g(o)),"click@button.remove.all":o.removeTask.bind(g(o))}),o.setState(r),o.onMount(o.elem),o}return e=u,(n=[{key:"addTask",value:function(){var t,e=this.elem.getElementsByTagName("input")[0];e&&e.value&&-1===this.state.tasks.indexOf(e.value)&&(this.setState(h(h({},this.state),{},{tasks:[].concat((t=this.state.tasks,function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[e.value])})),this.elem.getElementsByTagName("input")[0].value="")}},{key:"removeTask",value:function(t){var e=t.target.parentElement.firstElementChild;this.setState(h(h({},this.state),{},{tasks:this.state.tasks.filter((function(t){return t!==e.innerHTML}))})),this.elem.getElementsByTagName("input")[0].value=""}}])&&v(e.prototype,n),u}(r);function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function k(){function t(t,e,n,r){return t.replace(e,(function(t,e,o){return n===r&&e&&"not"===e.toLowerCase()||!e&&n!==r?"":o}))}function e(e,n,r,o,i){if(!r||void 0===o||!i)return"";var u=e;return[[/{{if (\w+)?IsLast}}(.+?){{endif}}/g,i-1],[/{{if (\w+)?IsFirst}}(.+?){{endif}}/g,0]].forEach((function(e){u=t(u,e[0],o,e[1])})),u.replace(/{{if (\w+)?Index (\d+)}}(.+?){{endif}}/g,(function(e,n,r){return u=t(u,/{{if (\w+)?Index \w+}}(.+?){{endif}}/g,o,Number(r))})),"object"!==S(n)?u.replace(/{{(\w+)}}/g,(function(t,e,r){return r?n:""})):u.replace(/{{(\w+)[.](\w+)}}/g,(function(t,e,o){return e!==r?"":Object.hasOwnProperty.call(n,o)?n[o]:""}))}function n(t){return t.replace(/(\n)/g,(function(){return""}))}function r(t,r){return n(t).replace(/{{for (\w+) as (\w+)}}(.+?){{endfor}}/g,(function(t,n,o,i){var u="";return r[n].forEach((function(t,a){u+=e(i,t,o,a,r[n].length)})),u}))}return{renderTemplate:function t(e,o){var i=r(e,o);return(i=(i=n(i)).replace(/{{if (\w+)}}(.+?){{endif}}/g,(function(e,n,r){return Object.hasOwnProperty.call(o,n)?t(r,o):""}))).replace(/{{(\w+)}}/g,(function(t,e){return Object.hasOwnProperty.call(o,e)?o[e]:""}))},replaceLoops:r,replaceLoopVariables:e}}window.addEventListener("load",(function(){var t=document.getElementById("app1"),e=document.getElementById("app2");new f(t,'\n       <h1>Count {{value}} {{input}}</h1>\n        <input value="{{input}}">\n        <button class="dec">-</button>\n        <button class="inc">+</button>\n    ',k,{value:50,input:"Hello"}),new j(e,'\n           <h1>Todo list:\n       {{for tasks as task}}\n            <span>{{task}}\n            {{if notIsLast}}\n            ,\n            {{endif}}\n            </span>\n       {{endfor}}\n       </h1>   \n       <section>\n            <input id="todo" value="{{input}}"/>\n            <button class="add">+</button>\n       </section>\n       {{for tasks as task}}\n            <section>\n                <span>{{task}}</span><button class="remove">-</button>\n            </section>\n       {{endfor}}\n    ',k,{tasks:["shopping"],input:"shopping"})}))}();