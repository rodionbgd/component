!function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],u=!0,c=!1;try{for(n=n.call(t);!(u=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{u||null==n.return||n.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},u(t,e)}function c(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(s,t);var e,n,o,l,f=(o=s,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=a(o);if(l){var n=a(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return c(this,t)});function s(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(r=f.call(this)).state=n,r.elem=t,r.events={},r.template=e,r}return e=s,(n=[{key:"subscribeToEvents",value:function(){var t=this;Object.entries(this.events).forEach((function(e){var n=r(e,2),o=n[0],i=n[1],u=o.split("@"),c=u[0],a=u[1].split(".")[0],l=u[1].split(".")[1],f="".concat(a).concat(l?".".concat(l):""),s=u[1].split(".")[2];s&&"all"===s.toLowerCase()?t.elem.querySelectorAll(f).forEach((function(t){return t.addEventListener(c,i)})):t.elem.querySelector(f).addEventListener(c,i)}))}},{key:"setState",value:function(t){var e=this;Object.entries(t).forEach((function(t){var n=r(t,2),o=n[0],i=n[1];e.state[o]=i})),this.elem.innerHTML=this.render(),this.subscribeToEvents()}},{key:"onMount",value:function(t){console.group(t.id),Object.entries(this.state).forEach((function(t){var e=r(t,2),n=e[0],o=e[1];console.log("".concat(n,": ").concat(o))})),console.groupEnd()}},{key:"render",value:function(){var t=this.template;return this.replaceVariablesValues(this.replaceLoops(t,this.state),this.state)}}])&&i(e.prototype,n),s}(function(){function n(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n)}var r,o;return r=n,(o=[{key:"replaceCondition",value:function(t,e,n,r){return t.replace(e,(function(t,e,o){return n===r&&e&&"not"===e.toLowerCase()||!e&&n!==r?"":o}))}},{key:"replaceLoopVariables",value:function(e,n,r,o,i){var u=this;if(!r||void 0===o||!i)return"";var c=e;return[[/{{if (\w+)?IsLast}}(.+?){{endif}}/g,i-1],[/{{if (\w+)?IsFirst}}(.+?){{endif}}/g,0]].forEach((function(t){c=u.replaceCondition(c,t[0],o,t[1])})),c.replace(/{{if (\w+)?Index (\d+)}}(.+?){{endif}}/g,(function(t,e,n){return c=u.replaceCondition(c,/{{if (\w+)?Index \w+}}(.+?){{endif}}/g,o,Number(n))})),"object"!==t(n)?c.replace(/{{(\w+)}}/g,(function(t,e,r){return r?n:""})):c.replace(/{{(\w+)[.](\w+)}}/g,(function(t,e,o){return e!==r?"":Object.hasOwnProperty.call(n,o)?n[o]:""}))}},{key:"replaceVariablesValues",value:function(t,e){var n=this,r=t;return(r=(r=this.removeNewLine(r)).replace(/{{if (\w+)}}(.+?){{endif}}/g,(function(t,r,o){return Object.hasOwnProperty.call(e,r)?n.replaceVariablesValues(o,e):""}))).replace(/{{(\w+)}}/g,(function(t,n){return Object.hasOwnProperty.call(e,n)?e[n]:""}))}},{key:"removeNewLine",value:function(t){return t.replace(/(\n)/g,(function(){return""}))}},{key:"replaceLoops",value:function(t,e){var n=this,r=t;return(r=this.removeNewLine(r)).replace(/{{for (\w+) as (\w+)}}(.+?){{endfor}}/g,(function(t,r,o,i){var u="";return e[r].forEach((function(t,c){u+=n.replaceLoopVariables(i,t,o,c,e[r].length)})),u}))}}])&&e(r.prototype,o),n}());function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},p(t,e)}function y(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return b(t)}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=v(r);if(o){var n=v(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return y(this,t)});function u(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),h(b(r=i.call(this,t,e,n)),"state",{value:1,input:"123"}),h(b(r),"events",{"click@button.dec":r.decreaseCounter.bind(b(r)),"click@button.inc":r.increaseCounter.bind(b(r)),"change@input":r.setInputValue.bind(b(r))}),r.setState(n),r.onMount(r.elem),r}return e=u,(n=[{key:"increaseCounter",value:function(){this.setState({value:this.state.value+1})}},{key:"decreaseCounter",value:function(){this.setState({value:this.state.value-1})}},{key:"setInputValue",value:function(t){this.setState({input:t.target.value})}}])&&s(e.prototype,n),u}(l);function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){T(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t,e){return S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},S(t,e)}function k(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return E(t)}function E(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P(t){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},P(t)}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=P(r);if(o){var n=P(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return k(this,t)});function u(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),T(E(r=i.call(this,t,e,n)),"state",{tasks:["shopping"],input:""}),T(E(r),"events",{"click@button.add":r.addTask.bind(E(r)),"click@button.remove.all":r.removeTask.bind(E(r))}),r.setState(n),r.onMount(r.elem),r}return e=u,(n=[{key:"addTask",value:function(){var t,e=this.elem.getElementsByTagName("input")[0];e&&e.value&&-1===this.state.tasks.indexOf(e.value)&&(this.setState(g(g({},this.state),{},{tasks:[].concat((t=this.state.tasks,function(t){if(Array.isArray(t))return w(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return w(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[e.value])})),this.elem.getElementsByTagName("input")[0].value="")}},{key:"removeTask",value:function(t){var e=t.target.parentElement.firstElementChild;this.setState(g(g({},this.state),{},{tasks:this.state.tasks.filter((function(t){return t!==e.innerHTML}))})),this.elem.getElementsByTagName("input")[0].value=""}}])&&j(e.prototype,n),u}(l);window.addEventListener("load",(function(){var t=document.getElementById("app1"),e=document.getElementById("app2");new d(t,'\n       <h1>Count {{value}} {{input}}</h1>\n        <input value="{{input}}">\n        <button class="dec">-</button>\n        <button class="inc">+</button>\n    ',{value:50,input:"Hello"}),new _(e,'\n           <h1>Todo list:\n       {{for tasks as task}}\n            <span>{{task}}\n            {{if notIsLast}}\n            ,\n            {{endif}}\n            </span>\n       {{endfor}}\n       </h1>   \n       <section>\n            <input id="todo" value="{{input}}"/>\n            <button class="add">+</button>\n       </section>\n       {{for tasks as task}}\n            <section>\n                <span>{{task}}</span><button class="remove">-</button>\n            </section>\n       {{endfor}}\n    ',{tasks:["shopping"],input:"shopping"})}))}();